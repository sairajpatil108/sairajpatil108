<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Simple AI ChatBot</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }

        main {
            max-width: 600px;
            margin: 20px auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .msg-container {
            margin-bottom: 20px;
            max-height: 600px;
            min-height: 500px;
            /* Max height for chat container */
            overflow-y: auto;
            /* Enable vertical scroll */
        }

        .user-msg,
        .bot-msg {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .user-msg {
            background-color: #f0f0f0;
        }

        .bot-msg {
            background-color: #d9edff;
        }

        .user-input-div {
            display: flex;
            align-items: center;
        }

        .user-input {
            flex: 1;
            padding: 10px;
            border-radius: 8px 0 0 8px;
            border: 1px solid #ccc;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 0 8px 8px 0;
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #0056b3;
        }

        /* Loading animation */
        .loader {
            border: 8px solid #f3f3f3;
            /* Light grey */
            border-top: 8px solid #3498db;
            /* Blue */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: auto;
            margin-top: 20px;
            display: none;
            /* Initially hidden */
            position: fixed;
            /* Position fixed to stay at the center */
            top: 50%;
            /* Align at the vertical center */
            left: 50%;
            /* Align at the horizontal center */
            transform: translate(-50%, -50%);
            /* Move to center */
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <main>
        <div class="msg-container" id="msg-container">
            <div class="bot-msg" id="bot-response"></div>
        </div>
        <div class="loader" id="loader"></div> <!-- Loading spinner -->
        <div class="user-input-div">
            <input type="text" placeholder="Enter symptoms here" class="user-input" id="symptoms-input" />
            <button class="btn" id="generate-btn">Go</button>
        </div>
    </main>

    <script type="importmap">
        {
            "imports": {
                "@google/generative-ai": "https://esm.run/@google/generative-ai"
            }
        }
    </script>

    <script type="module">
        import { GoogleGenerativeAI } from "@google/generative-ai";

        const API_KEY = "AIzaSyBHxCcxcFNp1FR-LHMJ20qc3nUDROppTHE";
        const genAI = new GoogleGenerativeAI(API_KEY);

        async function generateRecommendations() {
            const loader = document.getElementById('loader');
            loader.style.display = 'block'; // Show loader

            const model = genAI.getGenerativeModel({ model: "gemini-pro" });
            const symptoms = document.getElementById('symptoms-input').value.trim();

            // Check if symptoms are provided
            if (!symptoms) {
                alert("Please enter your symptoms.");
                loader.style.display = 'none'; // Hide loader
                return;
            }

            const prompt = ` ${symptoms}, only start with your introduction as assistant of Sairaj it looks like you're reaching out for assistance. I'm here as your personal assistant, ready to help you navigate through any questions or inquiries you might have.

Let's dive in together:

Introduction:

I'm your friendly AI assistant, Maya. Greetings! How may I assist you today?
Conversation Flow:

Feel free to explore any topic related to Sairaj's interests, projects, or experiences. Whether it's about his latest endeavors or his educational background, I'm here to shed light on all things Sairaj.
Engaging Responses:

I'll do my best to keep the conversation lively and engaging. Let's make this interaction as interesting as possible!
Filtering Content:

Let's focus on topics close to Sairaj's heart. From his educational journey to his technical skills and projects, we'll keep the conversation relevant and captivating.
Closing Remarks:

If there's anything else you'd like to explore or if you're ready to conclude our chat, just let me know. I'm at your service!
Let's make this conversation a delightful exchange of insights and information!
`;

            try {
                const result = await model.generateContent(prompt);
                const response = await result.response;
                const text = response.text();

                const messageElement = document.createElement('div');
                messageElement.classList.add('bot-msg');
                messageElement.innerText = `Bot: ${text}`;
                document.getElementById('msg-container').appendChild(messageElement);

                loader.style.display = 'none'; // Hide loader

                // Scroll to bottom of chat container
                document.getElementById('msg-container').scrollTop = document.getElementById('msg-container').scrollHeight;
            } catch (error) {
                console.error("An error occurred:", error);
                alert("An error occurred while processing your request. Please try again later.");
            }
        }

        document.getElementById('generate-btn').addEventListener('click', generateRecommendations);
    </script>
</body>

</html>